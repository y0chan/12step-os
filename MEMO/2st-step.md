# 2st-step
## メモリマップドI/O
- 周辺ハードウェアの制御について
    - プログラムによってソフトウェア的に周辺機器とデータのやり取りを実施できる?
        - 非常に面倒
            - CPUが他の作業をしにくくなる
    - CPUにはでなく、このような動作を行うICチップを実装して、それに行わせる
        - このような制御を行うICチップをコントローラという
    - CPUからはコントローラに対して、
        - データの送信要求を出したり
        - コントローラからデータを受信したりするだけ
- コントローラの操作方法
    - コントローラの制御はレジスタで行う
        - 特定のレジスタに1バイト書き込むと、あとはコントローラ側でその1バイトを送信するなど
- CPUにメモリ(DRAM)を増設することを考える
    - CPUのビット数
        - CPUが内部で扱うビット幅
        - 大抵データ・バスの幅と一致
            - 数値データを転送するためにCPUが持っている入出力ピンのこと
    - アドレス・バス
        - アドレスを指定するためにCPUが持っている出力ピンのこと
            - データ・バスとアドレス・バスは別
                - 32bitCPUならばそれぞれデータ・バスとアドレス・バスを32本持つ
    - 1MBのDRAMを4枚接続することを考える
        - 上位12bitの値に応じて、4つのDRAMのうちいずれかを選択するようにする
            - DRAMにはチップ・セレクトという、そのチップが動作のON/OFFを操作できるピンがあるのでそれを利用する
            - 上位12bitの値に応じて、それぞれのチップ・セレクトがONになるような回路にする
                - そのため比較器(コンバータ)という回路が必要
- シリアル・コントローラの制御
    - シリアル・コントローラ自身が制御用のレジスタを持っている
    - そのため、シリアル・コントローラもアドレス線をもっている
        - アドレスによってどのレジスタが操作されるかが決まる
- このようにメモリだけでなく、各種コントローラのレジスタもアドレス空間上にマッピングする
    - CPUからコントローラのレジスタがアドレス上に見えるようになる
    - このようなI/O操作方をメモリマップドI/Oと呼ぶ